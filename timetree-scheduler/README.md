# TimeTree Scheduler - ìì—°ì–´ ì¼ì • ìë™ ë“±ë¡

ìì—°ì–´ë¡œ ì…ë ¥í•œ ì¼ì •ì„ ChatGPT AIê°€ íŒŒì‹±í•˜ì—¬ TimeTree ê³µìœ  ìº˜ë¦°ë”ì— ìë™ìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

## ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Web UI        â”‚    â”‚   FastAPI        â”‚    â”‚   ChatGPT AI    â”‚
â”‚   (Next.js)     â”‚    â”‚   Backend        â”‚    â”‚   (OpenAI)      â”‚
â”‚                 â”‚    â”‚                  â”‚    â”‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Chat Input  â”‚â”‚â—„â”€â”€â–ºâ”‚ â”‚ Chat Router  â”‚ â”‚â—„â”€â”€â–ºâ”‚ â”‚ NLU Parser  â”‚ â”‚
â”‚  â”‚             â”‚â”‚    â”‚ â”‚              â”‚ â”‚    â”‚ â”‚             â”‚ â”‚
â”‚  â”‚ Event Card  â”‚â”‚    â”‚ â”‚ Event Router â”‚ â”‚    â”‚ â”‚ JSON Output â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
         â”‚              â”‚   PostgreSQL     â”‚             â”‚
         â”‚              â”‚                  â”‚             â”‚
         â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚             â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â–ºâ”‚ Users        â”‚ â”‚             â”‚
                        â”‚ â”‚ Calendars    â”‚ â”‚             â”‚
                        â”‚ â”‚ Events       â”‚ â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ â”‚ Tokens       â”‚ â”‚
                        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   TimeTree API   â”‚
                        â”‚                  â”‚
                        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                        â”‚ â”‚ OAuth 2.0    â”‚ â”‚
                        â”‚ â”‚ Calendars    â”‚ â”‚
                        â”‚ â”‚ Events CRUD  â”‚ â”‚
                        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

```
User    Web UI    FastAPI    ChatGPT   TimeTree    PostgreSQL
 â”‚        â”‚          â”‚         â”‚          â”‚            â”‚
 â”‚ "ë‚´ì¼ ì˜¤í›„ 2ì‹œ íšŒì˜" â”‚         â”‚          â”‚            â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â–ºâ”‚          â”‚         â”‚          â”‚            â”‚
 â”‚        â”‚ POST /chat/message  â”‚          â”‚            â”‚
 â”‚        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚         â”‚          â”‚            â”‚
 â”‚        â”‚          â”‚ Parse NL input     â”‚            â”‚
 â”‚        â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚          â”‚            â”‚
 â”‚        â”‚          â”‚ JSON event         â”‚            â”‚
 â”‚        â”‚          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚            â”‚
 â”‚        â”‚          â”‚ Validate & Store   â”‚            â”‚
 â”‚        â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚        â”‚          â”‚         â”‚          â”‚     OK     â”‚
 â”‚        â”‚          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚        â”‚ Event Preview       â”‚          â”‚            â”‚
 â”‚        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚          â”‚            â”‚
 â”‚ Review & Confirm  â”‚         â”‚          â”‚            â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â–ºâ”‚          â”‚         â”‚          â”‚            â”‚
 â”‚        â”‚ POST /events/confirmâ”‚          â”‚            â”‚
 â”‚        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚         â”‚          â”‚            â”‚
 â”‚        â”‚          â”‚ Create Event       â”‚            â”‚
 â”‚        â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚
 â”‚        â”‚          â”‚        â”‚    201 Created         â”‚
 â”‚        â”‚          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚            â”‚
 â”‚        â”‚          â”‚ Update DB          â”‚            â”‚
 â”‚        â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚        â”‚ Success Response    â”‚          â”‚            â”‚
 â”‚        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚          â”‚            â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚         â”‚          â”‚            â”‚
```

## ì£¼ìš” ê¸°ëŠ¥

- ğŸ—£ï¸ **ìì—°ì–´ ì…ë ¥**: "ë‚´ì¼ ì˜¤í›„ 2ì‹œ íŒ€ íšŒì˜", "ë‹¤ìŒì£¼ í™”ìš”ì¼ ì¢…ì¼ íœ´ê°€" ë“±
- ğŸ¤– **AI íŒŒì‹±**: ChatGPTê°€ ë‚ ì§œ/ì‹œê°„/ì œëª©/ì„¤ëª…ì„ ì •í™•íˆ ì¶”ì¶œ
- ğŸ“… **TimeTree ì—°ë™**: OAuth ì¸ì¦ ë° ê³µìœ  ìº˜ë¦°ë” ìë™ ë“±ë¡
- ğŸ”„ **ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°**: ë“±ë¡ ì „ ì¼ì • ë‚´ìš© í™•ì¸ ë° ìˆ˜ì •
- ğŸŒ **í•œêµ­ ì‹œê°„ëŒ€**: Asia/Seoul ê¸°ì¤€ ìë™ ì²˜ë¦¬
- ğŸ”’ **ë³´ì•ˆ**: JWT ì¸ì¦, OAuth 2.0, í† í° ì•”í˜¸í™”

## ê¸°ìˆ  ìŠ¤íƒ

### Frontend
- **Next.js 14** (App Router) + **React 18** + **TypeScript**
- **Tailwind CSS** + **shadcn/ui** (ëª¨ë˜ UI ì»´í¬ë„ŒíŠ¸)
- **ì‹¤ì‹œê°„ ì±„íŒ… UI** (WebSocket ì˜µì…˜)

### Backend
- **FastAPI** (Python 3.11+) + **Pydantic v2**
- **PostgreSQL** + **SQLAlchemy 2.x** + **Alembic**
- **OpenAI ChatGPT API** (JSON ì „ìš© í”„ë¡¬í”„íŠ¸)
- **TimeTree API** (OAuth 2.0 + Personal Access Token)

### Infrastructure
- **Docker** + **Docker Compose** (ë¡œì»¬/ìŠ¤í…Œì´ì§•)
- **Terraform** (AWS ECS/RDS í”„ë¡œë•ì…˜ ë°°í¬)
- **GitHub Actions** (CI/CD)
- **OpenTelemetry** + **Sentry** (ê´€ì¸¡ì„±)

## ë¹ ë¥¸ ì‹œì‘

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­

1. **TimeTree ì•± ë“±ë¡**
   - [TimeTree Developer Console](https://timetree.com/developers)ì—ì„œ ì•± ìƒì„±
   - Redirect URI: `http://localhost:8000/auth/timetree/callback`
   - Client ID, Client Secret ë°œê¸‰

2. **OpenAI API í‚¤**
   - [OpenAI Platform](https://platform.openai.com/)ì—ì„œ API í‚¤ ë°œê¸‰

### ë¡œì»¬ ì‹¤í–‰

```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/your-username/timetree-scheduler.git
cd timetree-scheduler

# 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp .env.example .env
# .env íŒŒì¼ì—ì„œ API í‚¤ë“¤ ì„¤ì •

# 3. ì „ì²´ ì„œë¹„ìŠ¤ ì‹¤í–‰
make up

# ë˜ëŠ” ê°œë³„ ì‹¤í–‰
make setup    # ì˜ì¡´ì„± ì„¤ì¹˜
make migrate  # DB ë§ˆì´ê·¸ë ˆì´ì…˜
make dev      # ê°œë°œ ì„œë²„ ì‹¤í–‰
```

ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:3000 ì ‘ì†

### ì‚¬ìš©ë²•

1. **TimeTree ì—°ë™**: "ë¡œê·¸ì¸" â†’ TimeTree OAuth ì¸ì¦
2. **ìº˜ë¦°ë” ì„ íƒ**: ë“±ë¡í•  ê³µìœ  ìº˜ë¦°ë” ì„ íƒ
3. **ì¼ì • ì…ë ¥**: "ë‚´ì¼ ì˜¤í›„ 3ì‹œ ì¹˜ê³¼ ì˜ˆì•½" ë“± ìì—°ì–´ë¡œ ì…ë ¥
4. **ë¯¸ë¦¬ë³´ê¸° í™•ì¸**: AIê°€ íŒŒì‹±í•œ ê²°ê³¼ ê²€í† 
5. **ë“±ë¡ ì™„ë£Œ**: "ë“±ë¡" ë²„íŠ¼ìœ¼ë¡œ TimeTreeì— ì´ë²¤íŠ¸ ìƒì„±

### ìì—°ì–´ ì˜ˆì‹œ

```
âœ… ì§€ì›ë˜ëŠ” í‘œí˜„:
- "ë‚´ì¼ ì˜¤í›„ 2ì‹œ íšŒì˜"
- "ë‹¤ìŒì£¼ í™”ìš”ì¼ ì¢…ì¼ ì—°ì°¨"
- "12ì›” 25ì¼ ì˜¤ì „ 10ì‹œ í¬ë¦¬ìŠ¤ë§ˆìŠ¤ íŒŒí‹°"
- "ë§¤ì£¼ ì›”ìš”ì¼ ì˜¤ì „ 9ì‹œ ì£¼ê°„íšŒì˜" (ë°˜ë³µ ì¼ì •)
- "ì˜¤ëŠ˜ ì €ë… 7ì‹œ í™ëŒ€ì—ì„œ ì €ë…ì‹ì‚¬"

âœ… ìë™ ì²˜ë¦¬:
- ì‹œê°„ ë¯¸ì§€ì • â†’ ì˜¤ì „ 10:00 ê¸°ë³¸ê°’
- ì¢…ë£Œì‹œê°„ ë¯¸ì§€ì • â†’ 1ì‹œê°„ í›„ ìë™ ì„¤ì •
- "ì¢…ì¼" â†’ 00:00~23:59:59
- ìƒëŒ€ì  ë‚ ì§œ ("ë‚´ì¼", "ë‹¤ìŒì£¼") â†’ ì ˆëŒ€ ë‚ ì§œ ë³€í™˜
```

## API ë¬¸ì„œ

ê°œë°œ ì„œë²„ ì‹¤í–‰ í›„ http://localhost:8000/docs ì—ì„œ Swagger UI í™•ì¸

ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸:
- `POST /chat/message` - ìì—°ì–´ ì¼ì • íŒŒì‹±
- `POST /events/preview` - ì´ë²¤íŠ¸ ë¯¸ë¦¬ë³´ê¸°
- `POST /events/confirm` - TimeTree ë“±ë¡
- `GET /me/calendars` - ì—°ë™ëœ ìº˜ë¦°ë” ëª©ë¡
- `GET /auth/timetree/login` - OAuth ë¡œê·¸ì¸

## ë°°í¬

### Docker Compose (ê¶Œì¥)

```bash
# í”„ë¡œë•ì…˜ ë¹Œë“œ
docker-compose -f docker-compose.prod.yml up -d

# í—¬ìŠ¤ì²´í¬
curl http://localhost:8000/health
```

### AWS (Terraform)

```bash
cd infra/terraform
terraform init
terraform plan
terraform apply

# ECS ì„œë¹„ìŠ¤ URL í™•ì¸
terraform output app_url
```

### í™˜ê²½ ë³€ìˆ˜

```bash
# í•„ìˆ˜
TIMETREE_CLIENT_ID=your_client_id
TIMETREE_CLIENT_SECRET=your_client_secret
OPENAI_API_KEY=your_openai_key
DATABASE_URL=postgresql://user:pass@localhost/db

# ì˜µì…˜
ENVIRONMENT=production
LOG_LEVEL=INFO
SENTRY_DSN=https://...
```

## ê°œë°œ

### ë°±ì—”ë“œ ê°œë°œ

```bash
cd backend
pip install -r requirements.txt
uvicorn main:app --reload --port 8000
```

### í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ

```bash
cd frontend
npm install
npm run dev
```

### í…ŒìŠ¤íŠ¸

```bash
# ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸
make test-backend

# í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸  
make test-frontend

# E2E í…ŒìŠ¤íŠ¸
make test-e2e
```

### ì½”ë“œ í’ˆì§ˆ

```bash
# ë¦°íŒ… & í¬ë§·íŒ…
make lint
make format

# íƒ€ì… ì²´í¬
make typecheck
```

## ì•„í‚¤í…ì²˜ ì„¸ë¶€ì‚¬í•­

### ì¤‘ë³µ ë°©ì§€ (Idempotency)
- `user_id + calendar_id + title + start_at` í•´ì‹œë¡œ ì¤‘ë³µ ì´ë²¤íŠ¸ ë°©ì§€
- 24ì‹œê°„ ë‚´ ë™ì¼ ì´ë²¤íŠ¸ ìƒì„± ì‹œ ê¸°ì¡´ ì´ë²¤íŠ¸ ë°˜í™˜

### AI í”„ë¡¬í”„íŠ¸ ì „ëµ
- ë‹¨ì¼ í”„ë¡¬í”„íŠ¸ë¡œ JSON ìŠ¤í‚¤ë§ˆ ê°•ì œ ì¶œë ¥
- Pydantic ê²€ì¦ ì‹¤íŒ¨ ì‹œ ìë™ ì¬ì‹œë„ (ìµœëŒ€ 3íšŒ)
- í•œêµ­ì–´ ì‹œê°„ í‘œí˜„ íŠ¹í™” ("ì˜¤í›„", "ì €ë…", "ìƒˆë²½" ë“±)

### ì—ëŸ¬ ì²˜ë¦¬
- TimeTree API ë ˆì´íŠ¸ë¦¬ë°‹ ìë™ ë°±ì˜¤í”„
- OpenAI API ì¥ì•  ì‹œ í´ë°± íŒŒì„œ (ì •ê·œì‹ ê¸°ë°˜)
- ë„¤íŠ¸ì›Œí¬ ì¥ì•  ì‹œ ì§€ìˆ˜ ë°±ì˜¤í”„ ì¬ì‹œë„

### ë³´ì•ˆ
- JWT í† í° + ë¦¬í”„ë ˆì‹œ í† í°
- TimeTree ì•¡ì„¸ìŠ¤ í† í° AES ì•”í˜¸í™” ì €ì¥
- CORS, CSP, HSTS í—¤ë” ì„¤ì •
- API ë ˆì´íŠ¸ë¦¬ë°‹ (ìœ ì €ë³„/IPë³„)

## ë¼ì´ì„ ìŠ¤

MIT License - ìì„¸í•œ ë‚´ìš©ì€ [LICENSE](LICENSE) íŒŒì¼ ì°¸ì¡°

## ê¸°ì—¬

1. Fork the Project
2. Create your Feature Branch (`git checkout -b feature/AmazingFeature`)
3. Commit your Changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the Branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## ì§€ì›

- ğŸ“§ ì´ë©”ì¼: support@timetree-scheduler.com
- ğŸ› ë²„ê·¸ ë¦¬í¬íŠ¸: [GitHub Issues](https://github.com/your-username/timetree-scheduler/issues)
- ğŸ’¬ ì»¤ë®¤ë‹ˆí‹°: [Discord](https://discord.gg/timetree-scheduler)

---

**Made with â¤ï¸ for seamless calendar management**